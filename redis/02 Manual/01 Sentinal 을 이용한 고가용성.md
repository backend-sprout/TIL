# Sentinal 
## Sentinal 개요  
       
**`In-Memory Database`에서의 장애 위험성**.       
레디스 프로세스가 다운되면 메모리 내에 저장됐던 데이터는 유실됩니다.      
복제 노드가 있다면 다행히 그 데이터는 복제 노드에 남아있지만,   
**운영 중인 서비스에서 어플리케이션이 마스터에 연결된 상태였다면 다음 과정을 직접 수행해야 합니다.**  
  
1. 복제 노드에 접속해서 REPLICAOF NO ONE 커맨드를 통해 마스터 연결 해제   
2. 어플리케이션 코드에서 레디스 연결 설정을 변경 (마스터 노드의 IP -> 복제 노드의 IP)
3. 배포
    
실제 운영되는 서비스에서 이를 해결하기까지는 오랜 시간이 걸릴 것이고, 이 기간 동안 데이터가 유실될 수도 있습니다.          
어플리케이션이 마스터 노드에 접근할 수 없을 때 데이터를 가져오기 위해 갑자기 많은 커넥션이 RDBMS에 몰려 서비스 장애로까지 이어진 사례도 많습니다.   
이러한 문제를 해결하기 위해서 Redis 는 Sentinal 기능을 지원해줍니다.    
     
## Sentinal 을 이용한 고가용성      
                  
Redis Sentinel은 Redis Cluster 를 사용하지 않을 때 Redis에 고가용성을 제공합니다.             
Redis Sentinel은 또한 `모니터링`, `알림`과 같은 `기타 부수적 작업`을 제공하고 클라이언트를 위한 구성 제공자 역할을 합니다.  
           
**모니터링** 
* Sentinel은 마스터 및 복제본 인스턴스가 예상대로 작동하는지 지속적으로 확인한다.         

**알림**    
* Sentinel은 API를 통해 모니터링되는 Redis 인스턴스 중 하나에 문제가 있음을 알릴 수 있다.          
  
**자동 장애 조치**   
* 마스터가 예상대로 작동하지 않으면        
* Sentinel은 복제본이 마스터로 승격되고 다른 추가 복제본이 새 마스터를 사용하도록 재구성되고       
* Redis 서버를 사용하는 애플리케이션에 사용할 새 주소에 대해 알리는 장애 조치 프로세스를 시작할 수 있다.   
  
**구성 제공자**  
* Sentinel은 클라이언트 서비스 검색을 위한 권한 소스 역할을 한다.   
* 클라이언트는 주어진 서비스를 담당하는 현재 Redis 마스터의 주소를 요청하기 위해 Sentinels에 연결한다.  
* 장애 조치가 발생하면 Sentinels는 새 주소를 보고한다.  
  




## 분산 시스템으로서의 센티넬

![4(4)](https://user-images.githubusercontent.com/50267433/196723347-887b0e66-8821-4e0e-960f-f2a4d0d06393.png)

  



